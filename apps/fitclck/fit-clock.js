!function(){var t=require("Storage"),e=null,n=0,r=0,a=null,s=0,i=0,o=new Date,l=Graphics.createArrayBuffer(240,240,1,{msb:!0});var c,u="     ",f="BPM: ";const d={" ":t=>[],0:t=>[[t,0,1,0],[1,0,1,1],[1,1,1,2],[t,2,1,2],[t,1,t,2],[t,0,t,1]],1:t=>[[1-t,0,1,0],[1,0,1,1],[1-t,1,1,1],[1-t,1,1-t,2],[1-t,2,1,2]],2:t=>[[0,0,1,0],[1,0,1,1],[0,1,1,1],[0,1+t,0,2],[1,2-t,1,2],[0,2,1,2]],3:t=>[[0,0,1-t,0],[0,0,0,t],[1,0,1,1],[0,1,1,1],[1,1,1,2],[t,2,1,2]],4:t=>[[0,0,0,1],[1,0,1-t,0],[1,0,1,1-t],[0,1,1,1],[1,1,1,2],[1-t,2,1,2]],5:(t,e)=>e?[[0,0,0,1],[0,0,1,0],[t,1,1,1],[1,1,1,2],[0,2,1,2],[0,2,0,2],[1,1-t,1,1],[0,1,0,1+t]]:[[0,0,0,1],[0,0,1,0],[0,1,1,1],[1,1,1,2],[0,2,1,2],[0,2-t,0,2]],6:t=>[[0,0,0,1-t],[0,0,1,0],[t,1,1,1],[1,1-t,1,1],[1,1,1,2],[t,2,1,2],[0,1-t,0,2-2*t]],7:t=>[[0,0,0,t],[0,0,1,0],[1,0,1,1],[1-t,1,1,1],[1,1,1,2],[1-t,2,1,2],[1-t,1,1-t,2]],8:t=>[[0,0,0,1],[0,0,1,0],[1,0,1,1],[0,1,1,1],[1,1,1,2],[0,2,1,2],[0,1,0,2-t]],9:t=>[[0,0,0,1],[0,0,1,0],[1,0,1,1],[0,1,1-t,1],[0,1,0,1+t],[1,1,1,2],[0,2,1,2]],":":t=>[[.4,.4,.6,.4],[.6,.4,.6,.6],[.6,.6,.4,.6],[.4,.4,.4,.6],[.4,1.4,.6,1.4],[.6,1.4,.6,1.6],[.6,1.6,.4,1.6],[.4,1.4,.4,1.6]]};function w(t,e,s){l.clear();var o=1;var c=2;const u=34;for(var w=0;w<t.length;w++){var B=t[w],h=e[w];":"==h&&(o-=4);var v,S=s;void 0!==B&&(h-1==B||0==h&&5==B||0==h&&9==B)?v=B:(v=h,S=0),d[v](S,5==B&&0==h).forEach(t=>{t[0]!=t[2]?l.fillRect(o+t[0]*u,c+t[1]*u-2,o+t[2]*u,c+t[3]*u+2):t[1]!=t[3]&&l.fillRect(o+t[0]*u-2,c+t[1]*u,o+t[2]*u+2,c+t[3]*u)}),":"==h&&(o-=4),o+=43}c+=68;var $=new Date;l.setFont("6x8"),l.setFontAlign(-1,-1),l.drawString(("0"+$.getSeconds()).substr(-2),o,c-8),l.setFontAlign(0,-1);var F=$.toString().substr(0,15);l.drawString(F,l.getWidth()/2,c+8),1==n&&(l.setFont("6x8"),l.setFontVector(12),l.setFontAlign(0,-1),l.drawString(f,l.getWidth()/2,c+8+16)),1==r&&(l.setFont("6x8"),l.setFontVector(12),l.setFontAlign(0,-1),l.drawString("GPS ON",l.getWidth()/2,c+8+32),null!=a&&a.satellites>0&&(l.setFont("6x8"),l.setFontVector(8),l.setFontAlign(0,-1),l.drawString(a.satellites+" satellites",l.getWidth()/2,c+8+48))),i>0&&(l.setFont("6x8"),l.setFontAlign(0,-1),l.drawString("Steps "+i,l.getWidth()/2,c+8+64)),g.setColor(1,1,1),g.drawImage({width:l.getWidth(),height:l.getHeight(),buffer:l.buffer},0,50)}function B(){if(Bangle.isLCDOn()&&!c){var t=new Date,e=(" "+t.getHours()).substr(-2)+":"+("0"+t.getMinutes()).substr(-2),n=u;if(e!=n){var r=0;c=setInterval((function(){(r+=.1)>=1&&(r=1,clearInterval(c),c=0),w(n,e,r)}),20),u=e}else w(e,n,0)}}function h(t){var e=t.toUTCString().split(" ");return e[4].substr(0,5)+" - "+[e[0],e[1],e[2]].join(" ")}function v(n){null==e&&(e=t.open("ftclog","a")),e.write(n+"\n")}function S(){n=0===n?1:0,Bangle.setHRMPower(n)}function $(){r=0===r?1:0,Bangle.setGPSPower(r)}Bangle.on("lcdPower",(function(t){t&&B()})),Bangle.on("step",(function(t){var e=new Date;o.getDate()==e.getDate()?i++:i=1,o=e})),Bangle.on("accel",(function(t){v(`"ACCL","${h(new Date)}","${t.x}","${t.y}","${t.z}","${t.diff}","${t.mag}"`)})),Bangle.on("GPS",(function(t){(a=t).satellites>0&&s<180?(s=0,setTime(a.time.getTime()/1e3),v(`"GPS","${h(new Date)}","${a.satellites}","${a.lat}","${a.lon}","${a.alt}","${a.speed}","${a.course}","${a.time.ms}"`)):++s>=180&&(s=0,r=0,Bangle.setGPSPower(r))})),Bangle.on("HRM",(function(t){f="BPM: "+t.bpm,v(`"HRM","${h(new Date)}","{hrm.bpm}","{hrm.confidence}"`)})),g.clear(),setInterval(B,1e3),B(),r=1,Bangle.setGPSPower(r),n=1,Bangle.setHRMPower(n),setWatch(S,BTN1,{repeat:!0}),setWatch($,BTN3,{repeat:!0}),Bangle.loadWidgets(),Bangle.drawWidgets()}();
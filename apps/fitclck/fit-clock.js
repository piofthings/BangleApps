!function(){var t=require("Storage"),e=0,n=0,r=null,i=0,s=Graphics.createArrayBuffer(240,240,1,{msb:!0});var a,o="     ",l="BPM: ";const c={" ":t=>[],0:t=>[[t,0,1,0],[1,0,1,1],[1,1,1,2],[t,2,1,2],[t,1,t,2],[t,0,t,1]],1:t=>[[1-t,0,1,0],[1,0,1,1],[1-t,1,1,1],[1-t,1,1-t,2],[1-t,2,1,2]],2:t=>[[0,0,1,0],[1,0,1,1],[0,1,1,1],[0,1+t,0,2],[1,2-t,1,2],[0,2,1,2]],3:t=>[[0,0,1-t,0],[0,0,0,t],[1,0,1,1],[0,1,1,1],[1,1,1,2],[t,2,1,2]],4:t=>[[0,0,0,1],[1,0,1-t,0],[1,0,1,1-t],[0,1,1,1],[1,1,1,2],[1-t,2,1,2]],5:(t,e)=>e?[[0,0,0,1],[0,0,1,0],[t,1,1,1],[1,1,1,2],[0,2,1,2],[0,2,0,2],[1,1-t,1,1],[0,1,0,1+t]]:[[0,0,0,1],[0,0,1,0],[0,1,1,1],[1,1,1,2],[0,2,1,2],[0,2-t,0,2]],6:t=>[[0,0,0,1-t],[0,0,1,0],[t,1,1,1],[1,1-t,1,1],[1,1,1,2],[t,2,1,2],[0,1-t,0,2-2*t]],7:t=>[[0,0,0,t],[0,0,1,0],[1,0,1,1],[1-t,1,1,1],[1,1,1,2],[1-t,2,1,2],[1-t,1,1-t,2]],8:t=>[[0,0,0,1],[0,0,1,0],[1,0,1,1],[0,1,1,1],[1,1,1,2],[0,2,1,2],[0,1,0,2-t]],9:t=>[[0,0,0,1],[0,0,1,0],[1,0,1,1],[0,1,1-t,1],[0,1,0,1+t],[1,1,1,2],[0,2,1,2]],":":t=>[[.4,.4,.6,.4],[.6,.4,.6,.6],[.6,.6,.4,.6],[.4,.4,.4,.6],[.4,1.4,.6,1.4],[.6,1.4,.6,1.6],[.6,1.6,.4,1.6],[.4,1.4,.4,1.6]]};function f(t,i,a){s.clear();var o=1;var f=2;const u=34;for(var d=0;d<t.length;d++){var w=t[d],v=i[d];":"==v&&(o-=4);var S,h=a;void 0!==w&&(v-1==w||0==v&&5==w||0==v&&9==w)?S=w:(S=v,h=0),c[S](h,5==w&&0==v).forEach(t=>{t[0]!=t[2]?s.fillRect(o+t[0]*u,f+t[1]*u-2,o+t[2]*u,f+t[3]*u+2):t[1]!=t[3]&&s.fillRect(o+t[0]*u-2,f+t[1]*u,o+t[2]*u+2,f+t[3]*u)}),":"==v&&(o-=4),o+=43}f+=68;var B=new Date;s.setFont("6x8"),s.setFontAlign(-1,-1),s.drawString(("0"+B.getSeconds()).substr(-2),o,f-8),s.setFontAlign(0,-1);var P=B.toString().substr(0,15);s.drawString(P,s.getWidth()/2,f+8),1==e&&(s.setFont("6x8"),s.setFontVector(12),s.setFontAlign(0,-1),s.drawString(l,s.getWidth()/2,f+8+16)),1==n&&(s.setFont("6x8"),s.setFontVector(12),s.setFontAlign(0,-1),s.drawString("GPS ON",s.getWidth()/2,f+8+32),null!=r&&r.satellites>0&&(s.setFont("6x8"),s.setFontVector(8),s.setFontAlign(0,-1),s.drawString(r.satellites+" satellites",s.getWidth()/2,f+8+48))),g.setColor(1,1,1),g.drawImage({width:s.getWidth(),height:s.getHeight(),buffer:s.buffer},0,50)}function u(){if(Bangle.isLCDOn()&&!a){var t=new Date,e=(" "+t.getHours()).substr(-2)+":"+("0"+t.getMinutes()).substr(-2),n=o;if(e!=n){var r=0;a=setInterval((function(){(r+=.1)>=1&&(r=1,clearInterval(a),a=0),f(n,e,r)}),20),o=e}else f(e,n,0)}}function d(t){file.write(t+"\n")}function w(){e=0===e?1:0,Bangle.setHRMPower(e)}function v(){n=0===n?1:0,Bangle.setGPSPower(n)}Bangle.on("lcdPower",(function(t){t&&(u(),drawWidgets())})),Bangle.on("GPS",(function(t){(r=t,console.log(JSON.stringify(r)),r.satellites>0&&i<180)?(i=0,setTime(r.time.getTime()/1e3),d("GPS,"+r.satellites+","+r.lat+","+r.lon+","+r.alt+","+r.speed+","+r.course+","+r.time.ms)):++i>=180&&(i=0,n=0,Bangle.setGPSPower(n))})),Bangle.on("HRM",(function(t){var e,n;l="BPM: "+t.bpm,d("HRM,"+(e=new Date,(n=e.toUTCString().split(" "))[4].substr(0,5)+" - "+[n[0],n[1],n[2]].join(" "))+","+t.bpm+","+t.confidence)})),g.clear(),t.open("fitclk","a"),setInterval(u,1e3),u(),n=1,Bangle.setGPSPower(n),e=1,Bangle.setHRMPower(e),file=t.open("fitclk","a"),setWatch(w,BTN1,{repeat:!0}),setWatch(v,BTN3,{repeat:!0})}();
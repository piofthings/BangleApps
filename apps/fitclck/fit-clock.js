!function(){var e=require("Storage"),t=null,n=0,a=0,r=null,i=0,l=0,s=new Date,o=Graphics.createArrayBuffer(240,240,1,{msb:!0});var c,f="     ",u="BPM: ";const d={" ":e=>[],0:e=>[[e,0,1,0],[1,0,1,1],[1,1,1,2],[e,2,1,2],[e,1,e,2],[e,0,e,1]],1:e=>[[1-e,0,1,0],[1,0,1,1],[1-e,1,1,1],[1-e,1,1-e,2],[1-e,2,1,2]],2:e=>[[0,0,1,0],[1,0,1,1],[0,1,1,1],[0,1+e,0,2],[1,2-e,1,2],[0,2,1,2]],3:e=>[[0,0,1-e,0],[0,0,0,e],[1,0,1,1],[0,1,1,1],[1,1,1,2],[e,2,1,2]],4:e=>[[0,0,0,1],[1,0,1-e,0],[1,0,1,1-e],[0,1,1,1],[1,1,1,2],[1-e,2,1,2]],5:(e,t)=>t?[[0,0,0,1],[0,0,1,0],[e,1,1,1],[1,1,1,2],[0,2,1,2],[0,2,0,2],[1,1-e,1,1],[0,1,0,1+e]]:[[0,0,0,1],[0,0,1,0],[0,1,1,1],[1,1,1,2],[0,2,1,2],[0,2-e,0,2]],6:e=>[[0,0,0,1-e],[0,0,1,0],[e,1,1,1],[1,1-e,1,1],[1,1,1,2],[e,2,1,2],[0,1-e,0,2-2*e]],7:e=>[[0,0,0,e],[0,0,1,0],[1,0,1,1],[1-e,1,1,1],[1,1,1,2],[1-e,2,1,2],[1-e,1,1-e,2]],8:e=>[[0,0,0,1],[0,0,1,0],[1,0,1,1],[0,1,1,1],[1,1,1,2],[0,2,1,2],[0,1,0,2-e]],9:e=>[[0,0,0,1],[0,0,1,0],[1,0,1,1],[0,1,1-e,1],[0,1,0,1+e],[1,1,1,2],[0,2,1,2]],":":e=>[[.4,.4,.6,.4],[.6,.4,.6,.6],[.6,.6,.4,.6],[.4,.4,.4,.6],[.4,1.4,.6,1.4],[.6,1.4,.6,1.6],[.6,1.6,.4,1.6],[.4,1.4,.4,1.6]]};function w(e,t,i){o.clear();var s=1;var c=2;const f=34;for(var w=0;w<e.length;w++){var B=e[w],v=t[w];":"==v&&(s-=4);var S,$=i;void 0!==B&&(v-1==B||0==v&&5==B||0==v&&9==B)?S=B:(S=v,$=0),d[S]($,5==B&&0==v).forEach(e=>{e[0]!=e[2]?o.fillRect(s+e[0]*f,c+e[1]*f-2,s+e[2]*f,c+e[3]*f+2):e[1]!=e[3]&&o.fillRect(s+e[0]*f-2,c+e[1]*f,s+e[2]*f+2,c+e[3]*f)}),":"==v&&(s-=4),s+=43}c+=68;var h=new Date;o.setFont("6x8"),o.setFontAlign(-1,-1),o.drawString(("0"+h.getSeconds()).substr(-2),s,c-8),o.setFontAlign(0,-1);var P=h.toString().substr(0,15);o.drawString(P,o.getWidth()/2,c+8),1==n&&(o.setFont("6x8"),o.setFontVector(12),o.setFontAlign(0,-1),o.drawString(u,o.getWidth()/2,c+24)),1==a&&(o.setFont("6x8"),o.setFontVector(12),o.setFontAlign(0,-1),o.drawString("GPS ON",o.getWidth()/2,c+40),null!=r&&r.satellites>0&&(o.setFont("6x8"),o.setFontAlign(0,-1),o.drawString(r.satellites+" satellites",o.getWidth()/2,c+56))),l>0&&(o.setFont("6x8"),o.setFontAlign(0,-1),o.drawString("Steps "+l,o.getWidth()/2,c+64)),g.setColor(1,1,1),g.drawImage({width:o.getWidth(),height:o.getHeight(),buffer:o.buffer},0,50)}function B(){if(Bangle.isLCDOn()&&!c){var e=new Date,t=(" "+e.getHours()).substr(-2)+":"+("0"+e.getMinutes()).substr(-2),n=f;if(t!=n){var a=0;c=setInterval((function(){(a+=.1)>=1&&(a=1,clearInterval(c),c=0),w(n,t,a)}),20),f=t}else w(t,n,0)}}function v(e){var t=e.toUTCString().split(" ");return t[4].substr(0,5)+" - "+[t[0],t[1],t[2]].join(" ")}function S(n){null==t&&(console.log("Trying to create new fileftclog"),t=e.open("ftclog","a")),t.write(n+"\n")}function $(){n=0===n?1:0,Bangle.setHRMPower(n)}function h(){a=0===a?1:0,Bangle.setGPSPower(a)}Bangle.on("lcdPower",(function(e){e&&(B(),Bangle.drawWidgets())})),Bangle.on("step",(function(e){var t=new Date;s.getDate()==t.getDate()?l++:l=1,s=t;var n=Bangle.getAccel();S(`"ACCL","${v(new Date)}","${n.x}","${n.y}","${n.z}","${n.diff}","${n.mag}"`)})),Bangle.on("GPS",(function(e){(r=e).satellites>0&&i<180?(i=0,setTime(r.time.getTime()/1e3),S(`"GPS","${v(new Date)}","${r.satellites}","${r.lat}","${r.lon}","${r.alt}","${r.speed}","${r.course}","${r.time.ms}"`)):++i>=180&&(i=0,a=0,Bangle.setGPSPower(a))})),Bangle.on("HRM",(function(e){u="BPM: "+e.bpm,S(`"HRM","${v(new Date)}","${e.bpm}","${e.confidence}"`)})),g.clear(),setInterval(B,1e3),B(),a=1,Bangle.setGPSPower(a),n=1,Bangle.setHRMPower(n),setWatch($,BTN1,{repeat:!0}),setWatch(h,BTN3,{repeat:!0}),Bangle.loadWidgets(),Bangle.drawWidgets()}();